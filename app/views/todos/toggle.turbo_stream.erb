<%# ========================================
    toggle.turbo_stream.erb - Todo完了/未完了切り替え時のTurbo Stream
    ========================================
    このビューは、Todoの完了状態が切り替えられた後に自動的にレンダリングされます

    【動作フロー】
    1. _todo.html.erb でチェックボックスをクリック
       ↓
    2. PATCH /todos/:id/toggle リクエスト（toggleアクション）
       ↓
    3. completedフラグが反転される（true ↔ false）
       ↓
    4. このビューがレンダリングされる
       ↓
    5. 該当のTodoの表示が更新される
       - 未完了→完了: チェックマークが表示、打ち消し線、背景色が緑に
       - 完了→未完了: チェックマークが消える、打ち消し線が消える、背景色が元に戻る
%>

<%# ========================================
    完了状態を切り替えたTodoで要素を置き換え
    ========================================
    turbo_stream.replace の構文:
    - 第1引数: 置き換える要素のID（dom_id(@todo)）
    - partial: レンダリングするパーシャル
    - locals: パーシャルに渡す変数

    動作:
    - _todo.html.erb を再レンダリング
    - completedの値に応じて、表示が変わる
    - ページ全体をリロードせず、チェックボックスをクリックするだけで即座に反映

    【update.turbo_stream.erb との違い】
    - update: タイトルなどのデータが変更される
    - toggle: 完了状態だけが変更される
    - どちらも turbo_stream.replace を使用
    - 処理は同じだが、用途が異なるため別ファイルにしている
%>
<%= turbo_stream.replace dom_id(@todo), partial: "todos/todo", locals: { todo: @todo } %>
