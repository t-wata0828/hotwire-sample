<%# ========================================
    destroy.turbo_stream.erb - Todo削除時のTurbo Stream
    ========================================
    このビューは、Todoが削除された後に自動的にレンダリングされます

    【動作フロー】
    1. _todo.html.erb で「削除」ボタンをクリック
       ↓
    2. 確認ダイアログで「OK」を選択
       ↓
    3. DELETE /todos/:id リクエスト（destroyアクション）
       ↓
    4. Todoがデータベースから削除される
       ↓
    5. このビューがレンダリングされる
       ↓
    6. 該当のTodoがDOMから削除される（フェードアウトアニメーション付き）
%>

<%# ========================================
    指定されたTodoをDOMから削除
    ========================================
    turbo_stream.remove の構文:
    - 第1引数: 削除する要素のID（dom_id(@todo) = "todo_1" など）

    動作:
    - 指定されたIDの要素をDOMから完全に削除
    - CSSアニメーションと組み合わせて、スムーズに削除
    - データベースからも削除されている
    - ページ全体はリロードされない

    【Turbo Streamsの7つのアクション】
    1. append   - 要素を末尾に追加
    2. prepend  - 要素を先頭に追加
    3. replace  - 要素を置き換え
    4. update   - 要素の内容を更新（要素自体は残る）
    5. remove   - 要素を削除 ← このファイルで使用
    6. before   - 要素の前に追加
    7. after    - 要素の後に追加
%>
<%= turbo_stream.remove dom_id(@todo) %>

<%# ========================================
    最後のTodoが削除された場合、空メッセージを表示
    ========================================
%>
<% if @todos_count == 0 %>
  <%= turbo_stream.append "todos" do %>
    <p class="empty-state" id="empty-state">まだTodoがありません</p>
  <% end %>
<% end %>
