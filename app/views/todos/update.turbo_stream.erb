<%# ========================================
    update.turbo_stream.erb - Todo更新時のTurbo Stream
    ========================================
    このビューは、Todoが正常に更新された後に自動的にレンダリングされます

    【動作フロー】
    1. edit.html.erb で「保存」ボタンをクリック
       ↓
    2. PATCH /todos/:id リクエスト（updateアクション）
       ↓
    3. Todoが更新される
       ↓
    4. このビューがレンダリングされる
       ↓
    5. 編集フォームが更新後のTodo表示に置き換わる
%>

<%# ========================================
    更新されたTodoで該当の要素を置き換え
    ========================================
    turbo_stream.replace の構文:
    - 第1引数: 置き換える要素のID（dom_id(@todo) = "todo_1" など）
    - partial: レンダリングするパーシャル
    - locals: パーシャルに渡す変数

    動作:
    - 編集フォーム（edit.html.erb）が表示されている状態
    - 同じ dom_id の要素を _todo.html.erb で置き換える
    - 編集フォームが通常のTodo表示に戻る
    - 更新された内容が即座に反映される
    - ページ全体はリロードされない

    【Turbo Frameとの違い】
    - Turbo Frame: 同じIDのフレーム同士が自動的に置き換わる
    - Turbo Stream: サーバー側から明示的に「この要素を置き換えろ」と指示
    - Turbo Streamの方が柔軟で、複数箇所を同時に更新できる
%>
<%= turbo_stream.replace dom_id(@todo), partial: "todos/todo", locals: { todo: @todo } %>
